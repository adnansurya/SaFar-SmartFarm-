<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>SaFar - Smart Farm</title>

  

 

  <!-- local CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/heroic-features.css" rel="stylesheet">

</head>

<body>
<!-- update the version number as needed -->
<script src="/__/firebase/7.3.0/firebase-app.js"></script>
<!-- include only the Firebase features as you need -->
<!-- <script defer src="/__/firebase/7.3.0/firebase-auth.js"></script> -->
<script src="/__/firebase/7.3.0/firebase-database.js"></script>
<!-- <script defer src="/__/firebase/7.3.0/firebase-messaging.js"></script> -->
<!-- <script defer src="/__/firebase/7.3.0/firebase-storage.js"></script> -->
<!-- initialize the SDK after all desired features are loaded -->
<script src="/__/firebase/init.js"></script>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">SaFar <span class="mx-2">|</span> Smart Farm</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/log.html">Log</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>          
        </ul>
      </div>
    </div>
  </nav>

  
  <!-- Page Content -->
  <div class="container">

    <!-- Jumbotron Header --> <!-- Carousel -->
    <header class="jumbotron my-4">
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <!-- <li data-target="#carouselExampleIndicators" data-slide-to="2"></li> -->
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img class="d-block w-100 img-fluid col-lg-4 mx-auto" src="image/Sawah-Tadah-Hujan-sulsel.jpg" alt="First slide">
            <div class="carousel-caption d-md-block text-dark text-left">
              <h4 class="font-weight-bold display-4"> SaFaR <span class="mx-3">|</span> Smart Farm </h4>
              <p> Mesin otomatis untuk memantau pertumbuhan tanaman, agar tanaman dapat tumbuh optimal dan sebagai upaya penyelamatan bumi dalam bidang <i>Water conservation</i> </p>
            </div>
          </div>
          <div class="carousel-item">
              <img class="d-block w-100 col-lg-4 float-right" src="image/server_time.jpg" alt="Second slide">
            <div class="carousel-caption d-md-block text-dark text-left">
              <h2 class="font-weight-bold"> Waktu Server </h2>
              <h3 id="waktuTxt">Loading...</h3>
              <p> Untuk menunjukkan waktu terakhir pengambilan data dari server</p>
            </div>
          </div>
          <!-- <div class="carousel-item">
            <img class="d-block w-100 col-lg-3 mx-auto" src="image/light-on.png" alt="Third slide">
            <div class="carousel-caption d-md-block text-dark">
              <h5 class="display font-weight-bold"> Coming Soon ! </h5>
              <p> Kelembaban Udara masih stabil tetapi agak sedikit lembab </p>
            </div>
          </div> -->
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </header>

    <!-- Page Features -->
    <div class="row text-center mh-100">

      <div class="col-lg-3 col-md-6 mb-4">
        <div class="card h-100 pt-3">
          <img class="card-img-top" src="image/42650thermometer_99061.png" alt="">
          <div class="card-body">
            <h4 class="card-title"> Temperatur </h4>
            <h1 class="card-text" id="tempTxt">Loading...</h1>
            <p class="card-text">
              Indikator <b>Temperatur</b> menunjukkan suhu udara pada alat tersebut
            </p>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 mb-4">
        <div class="card h-100 pt-3">
          <img class="card-img-top" src="image/humidity.png" alt="">
          <div class="card-body">
            <h4 class="card-title"> Kelembaban Udara </h4>
            <h1 class="card-title" id="humTxt">Loading...</h1>
            <p class="card-text">
              <b>Kelembaban Udara</b> merupakan indikator yang menunjukkan kelembaban udara pada alat tersebut
            </p>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 mb-4">
        <div class="card h-100 pt-3">
          <img class="card-img-top" src="image/TEMPERATURE-256.png" alt="">
          <div class="card-body">
            <h4 class="card-title">Kelembapan Tanah</h4>
            <h1 class="card-title" id="moistTxt">Loading...</h1>
            <p class="card-text">
              Nilai <b>Kelembapan Tanah</b> bertujuan untuk menunjukkan seberapa lembab tanah pada tanaman
            </p>
          </div>
        </div>
      </div>
<!-- 
      <div class="col-lg-3 col-md-6 mb-4">
        <div class="card h-100 pt-3">
          <img class="card-img-top" src="image/SOIL_PH_METER-256.png" alt="">
          <div class="card-body">
            <h4 class="card-title"> PH Tanah </h4>
            <h1 class="card-title" id="phTxt">Loading...</h1>
            <p class="card-text">
              Pengaturan kondisi tingkat keasaman tanah dapat dilihat melalui indikator <b>PH Tanah</b>
            </p>
          </div>
        </div>
      </div> -->

      <div class="col-lg-3 col-md-6 mb-4">
          <div class="card h-100 pt-3">
            <img class="card-img-top p-3" src="image/heat_index.png" alt="">
            <div class="card-body">
              <h4 class="card-title"> (Heat Index) </h4>
              <h1 class="card-title" id="hiTxt">Loading...</h1>
              <p class="card-text">
                Pompa air agar tanaman mendapat pasokan air sesuai kelembaban tanah
              </p>
            </div>
          </div>
        </div>

      <div class="col-lg-3 col-md-6 mb-4">
        <div class="card h-100 pt-3">
          <img class="card-img-top" src="image/light-on.png" alt="">
          <div class="card-body">
            <h4 class="card-title"> Status Lampu : </h4>
            <h1 class="card-title" id="lampTxt">Loading...</h1>
            <p class="card-text">
              Lampu digunakan untuk menjaga suhu udara jika terlalu dingin
            </p>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 mb-4">
        <div class="card h-100 pt-3">
          <img class="card-img-top" src="image/pump.png" alt="">
          <div class="card-body">
            <h4 class="card-title"> Status Pompa : </h4>
            <h1 class="card-title" id="pumpTxt">Loading...</h1>
            <p class="card-text">
              Pompa air agar tanaman mendapat pasokan air sesuai kelembaban tanah
            </p>
          </div>
        </div>
      </div>
   
  

      <div class="col-lg-6 col-md-6 mb-4">
          <div class="card px-2">
            <img class="card-img-top col-lg-9 rounded mx-auto d-block" src="image/photo-camera.png" alt="">
            <div class="card-body">
              <h4 class="card-title"> Foto Tanaman : </h4>
              <p class="card-text">
                Kondisi terkini pertumbuhan tanaman secara fisik dapat dilihat melalui foto terkini tanaman
              </p>
            </div>
          </div>
        </div>

    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->

   <!-- Footer -->
   <footer class="py-5 bg-dark">
      <div class="container">
        <div class="text-center">
            <img class="img-thumbnail rounded-circle"  width="100" height="100" src="image/logo_man.jpg" alt="">
            <p class="m-0 text-center text-white">Presented By :</p>
            <h3 class="m-0 text-center text-white">MAN 2 Makassar</h3>
        </div>
        
        <p class="m-0 text-center text-white">Copyright &copy; Smart Farm 2019</p>
      </div>
      <!-- /.container -->
    </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script>
      const db = firebase.database();
    </script>
  <script>
    db.ref('last_update').once('value').then(function(snapshot){
      let last_update = snapshot.val();
      $('#waktuTxt').html(last_update);

    })
    db.ref('monitor').on('value', function(snapshot){
      let realtimeData = snapshot.val();

      let temp = realtimeData.temperature;
      let hum = realtimeData.humidity;
      let moist = realtimeData.soil_moisture;
      let hi = realtimeData.heat_index;
      let pump = realtimeData.pump;
      let lamp = realtimeData.lamp;

    
      console.log(temp);
      
      $('#tempTxt').html(temp + ' &#8451;');
      $('#humTxt').html(hum + ' %');
      $('#moistTxt').html(moist);
      $('#hiTxt').html(hi + ' &#8451;');
      $('#pumpTxt').html(pump);
      $('#lampTxt').html(lamp);
      // $('#phTxt').html('N/A');

      


      
      
    });
  </script>

</body>

</html>
